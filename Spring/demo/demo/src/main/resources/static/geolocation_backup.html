<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geolocaliza√ß√£o - Ambul√¢ncias</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="has-sidebar">
    <!-- Top Header Bar -->
    <div class="top-header">
        <div class="header-left">
            <button class="sidebar-toggle-btn" onclick="toggleSidebar()">
                <i class="fas fa-bars"></i>
            </button>
            <a href="/home.html" class="home-btn">
                <i class="fas fa-home"></i>
                <span>Home</span>
            </a>
        </div>
        <div class="header-right">
            <div class="user-header-profile">
                <div class="user-avatar-small">
                    <i class="fas fa-user"></i>
                </div>
                <div class="user-info-small">
                    <span class="user-name">Admin User</span>
                    <span class="user-email">admin@medilink.com</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Sidebar (injected by JavaScript) -->
    <div id="sidebar-container"></div>

    <!-- Main Content -->
    <main class="main-content">

    

    <div class="container">
        <h1>Geolocaliza√ß√£o das Ambul√¢ncias üöë</h1>

        <div id="map"></div>
    </div>

    <script>
        // Dados fict√≠cios de ambul√¢ncias para exibi√ß√£o no mapa
        const ambulancias = [
            { placa: 'ABC-1234', latitude: -23.5505, longitude: -46.6333, status: 'Dispon√≠vel' },
            { placa: 'DEF-5678', latitude: -23.5515, longitude: -46.6343, status: 'Em tr√¢nsito' },
            { placa: 'GHI-9012', latitude: -23.5525, longitude: -46.6353, status: 'Ocupada' },
            { placa: 'JKL-3456', latitude: -23.5535, longitude: -46.6363, status: 'Dispon√≠vel' },
            { placa: 'MNO-7890', latitude: -23.5545, longitude: -46.6373, status: 'Em manuten√ß√£o' }
        ];

        function initMap() {
            const map = new google.maps.Map(document.getElementById('map'), {
                zoom: 12,
                center: { lat: -23.5505, lng: -46.6333 } // Centro em S√£o Paulo
            });

            const markers = ambulancias.map(ambulancia => {
                const marker = new google.maps.Marker({
                    position: { lat: ambulancia.latitude, lng: ambulancia.longitude },
                    map: map,
                    title: `Ambul√¢ncia ${ambulancia.placa}`
                });

                const infoWindow = new google.maps.InfoWindow({
                    content: `<strong>Placa:</strong> ${ambulancia.placa}<br><strong>Status:</strong> ${ambulancia.status}`
                });

                marker.addListener('click', () => {
                    infoWindow.open(map, marker);
                });

                return marker;
            });

            // Atualiza posi√ß√µes periodicamente (simula√ß√£o)
            setInterval(() => {
                ambulancias.forEach((ambulancia, index) => {
                    ambulancia.latitude += (Math.random() - 0.5) * 0.001;
                    ambulancia.longitude += (Math.random() - 0.5) * 0.001;
                    markers[index].setPosition(new google.maps.LatLng(ambulancia.latitude, ambulancia.longitude));
                });
            }, 3000);
        }

        // Inicializa o mapa
        initMap();
    </script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAIz6iI0blYnCpoGhjstXvYbxdVdyHRWpo&callback=initMap"></script>
    </main>

    <script src="sidebar.js"></script>
    <script>
        // Inject sidebar
        document.getElementById('sidebar-container').innerHTML = createSidebar('geolocation');
        
        // Apply saved theme
        const theme = localStorage.getItem('theme') || 'light';
        if (theme === 'dark') {
            document.body.classList.add('dark-theme');
        }
        
        // Apply accessibility settings
        const highContrast = localStorage.getItem('highContrast') === 'true';
        const largeText = localStorage.getItem('largeText') === 'true';
        
        if (highContrast) {
            document.body.classList.add('high-contrast');
        }
        if (largeText) {
            document.body.classList.add('large-text');
        }
    </script>
</body>
</html>
